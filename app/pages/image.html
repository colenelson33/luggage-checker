<input type="file" id="file-upload" accept="image/*">
<textarea id="description" placeholder="Add additional details or requests (e.g., 'Provide a packing list')"></textarea>
<button id="submit-btn">Analyze Image</button>
<div id="response-output"></div>

<script>
    document.getElementById("submit-btn").addEventListener("click", async function () {
        const fileInput = document.getElementById("file-upload");
        const description = document.getElementById("description").value;
        const file = fileInput.files[0];
        
        if (!file) {
            alert("Please select an image to upload.");
            return;
        }

        const formData = new FormData();
        formData.append("image", file);
        formData.append("description", description); // Add description to the form data

        try {
            const response = await fetch('http://localhost:3000/analyze-image', {
                method: 'POST',
                body: formData,
            });
            
            const data = await response.json();
            document.getElementById("response-output").innerText = data.response || "No response received.";
        } catch (error) {
            console.error("Error analyzing image:", error);
            document.getElementById("response-output").innerText = "Error analyzing image.";
        }
    });
</script>
